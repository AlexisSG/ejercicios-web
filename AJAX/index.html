<!DOCTYPE html>
<html>
<head>
	<title>Probando AJAX</title>
	<script type="text/javascript" src="ajax.js"></script>
</head>
<body>
<h1>Este es un contenido est치tico</h1>
<button type="button" onclick="muestra()">Probar</button>
<select id="lista">
	<option value="0">Selecciona una opci칩n</option>
</select>


<script type="text/javascript">

function muestra(){
	//Creamos el objeto AJAX
	var miajax = nuevoAjax();

	//Hago la petici칩n a mi server
	miajax.open('post','consulta.php',true);

	//Funci칩n para cuando cambie el status
	miajax.onreadystatechange = function(){
		if(miajax.readyState == 4){
			//Proceso el texto como JS
			var json = eval(miajax.responseText);
			//Obtengo el select
			var select = document.getElementById("lista");
			for(i in json){
				var texto = document.createTextNode(json[i].nombre);
				var option = document.createElement('option');
				option.setAttribute('value',json[i].id);
				option.appendChild(texto);
				select.appendChild(option);
			}

			
		}
	}

	miajax.send(null);
}

</script>
</body>
</html>